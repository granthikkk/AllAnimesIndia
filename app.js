(()=>{"use strict";var e,t={5431:(e,t,a)=>{var n=a(8307);document.querySelector("#random-anime")?.addEventListener("click",(e=>{(async()=>{const e=await fetch(`${kiranime_endpoint}/anime/random`);location.href=await e.json()})()}));const s=kiranime_translation.app_js;document.addEventListener("scroll",(function(e){window.scrollY>75?(document.querySelector("#header-data")?.classList.remove("bg-opacity-0"),document.querySelector("#header-data")?.classList.add("bg-opacity-95")):(document.querySelector("#header-data")?.classList.add("bg-opacity-0"),document.querySelector("#header-data")?.classList.remove("bg-opacity-95"))}));const r=document.querySelector("[data-sidebar-trigger]"),o=document.querySelector("[data-sidebar]"),i=document.querySelector("[data-sidebar-overlay]");r&&(r.addEventListener("click",(e=>{o.classList.toggle("-translate-x-full"),i.classList.toggle("hidden"),document.querySelector("[data-sidebar-closer]").addEventListener("click",(()=>{i.classList.remove("block"),i.classList.add("hidden"),o.classList.add("-translate-x-full")}))})),i.addEventListener("click",(e=>{i.classList.remove("block"),i.classList.add("hidden"),o.classList.add("-translate-x-full")})));const c=document.querySelector("[data-login-toggle]"),d=document.querySelector("#login-form");c&&(c.addEventListener("click",(e=>{e.preventDefault(),d.classList.remove("hidden"),d.classList.add("flex")})),document.querySelector("[data-login-overlay]").addEventListener("click",(e=>{d.classList.add("hidden"),d.classList.remove("flex")})));const l=document.querySelector("[data-more-less]");l&&l.addEventListener("click",(e=>{"true"===l.dataset.ismore?(document.querySelector("[data-synopsis]").classList.remove("line-clamp-3"),l.innerHTML=s["app:64"],l.dataset.ismore="false"):(document.querySelector("[data-synopsis]").classList.add("line-clamp-3"),l.innerHTML=s["app:68"],l.dataset.ismore="true")}));const u=document.querySelectorAll("[data-watchlist-type]");u&&u.forEach((e=>{e.addEventListener("click",(e=>{const t=e.target.getAttribute("data-watchlist-type");u.forEach((e=>{e.dataset.watchlistType!==t?e.classList.remove("active"):e.classList.add("active")})),animewatchlistparam=t}))}));let m=document.querySelector("[data-login-button]"),p=document.querySelector("[data-register-button]"),y=document.querySelector("[data-to-login-button]"),v=document.querySelector("[data-to-register-button]"),f=document.querySelector("[data-login-template]"),g=document.querySelector("[data-register-template]");m&&(v.addEventListener("click",(()=>{f.classList.add("hidden"),g.classList.remove("hidden")})),m.addEventListener("click",(async e=>{e.preventDefault(),m.innerHTML=`<span class="animate-pulse">${s["app:112"]||"Loading..."}</span>`;const t=document.querySelector("[name='username']")?.value,a=document.querySelector("[name='password']")?.value,n=document.querySelector('[name="login_nonce"]')?.value,r=await fetch(`${kiranime_endpoint}/auth/login`,{method:"POST",body:JSON.stringify({username:t,password:a,nonce:n}),headers:{"Content-Type":"application/json"}}),o=await r.json();if(!r.ok)return document.querySelector("[data-login-error-info]").innerHTML=o.message,void(m.innerHTML=s["app:137"]);m.innerHTML=`<span class="text-xs">${o.message}</span>`,setTimeout((()=>{location.reload()}),2e3)}))),p&&(y.addEventListener("click",(()=>{g.classList.add("hidden"),f.classList.remove("hidden")})),p.addEventListener("click",(async e=>{e.preventDefault(),p.setAttribute("disabled","true"),p.innerHTML=`<span class="animate-pulse">${s["app:112"]}</span>`;const t=document.querySelector("[name='register_username']")?.value,a=document.querySelector("[name='register_password']")?.value,r=document.querySelector("[name='register_confirm_password']")?.value,o=document.querySelector("[name='register_nonce']")?.value,i=document.querySelector("[name='register_email']")?.value;a!==r&&(document.querySelector("[data-register-error-info]").innerHTML=s["app:161"],p.removeAttribute("disabled"));const c=await fetch(kiranime_endpoint+"/auth/register",{method:"POST",body:JSON.stringify({username:t,password:a,email:i,nonce:o}),headers:{"Content-Type":"application/json"}}),d=await c.json();if(c.status>=400||!d?.success)return(0,n.error)(s["app:181"]),document.querySelector("[data-register-error-info]").innerHTML=d.message||d,void(p.innerHTML=s["app:184"]);const l=await fetch(`${kiranime_endpoint}/auth/login`,{method:"POST",body:JSON.stringify({password:a,username:t,nonce:document.querySelector("[name='login_nonce']").value}),headers:{"Content-Type":"application/json"}}),u=await l.json();l.ok?((0,n.success)(s["app:205"]),(0,n.success)(s["app:206"]),p.innerHTML=`<span class="text-xs">${u.message}</span>`,setTimeout((()=>{(0,n.success)(s["app:209"]),location.reload()}),1e3)):y.click()})));const h=document.querySelector("[data-search-ajax-input]"),L=document.querySelector("[data-search-ajax-result]"),S=document.querySelector("[data-search-result-area]"),q=document.querySelector("[data-search-view-all]"),k=document.querySelector("[data-mobile-search-input]"),b=document.querySelector("[data-mobile-search-result]"),w=document.querySelector("[data-mobile-search-result-area]"),_=document.querySelector("[data-mobile-search-view-all]"),E=document.querySelector("[data-mobile-search-trigger]"),T=document.querySelector("[data-mobile-search-status]");if(h||k){let e,t;E?.addEventListener("click",(e=>{e.preventDefault(),"0"===T.dataset.mobileSearchStatus?(T.classList.remove("-translate-y-full","opacity-0","pointer-events-none"),T.classList.add("translate-y-0"),T.dataset.mobileSearchStatus="1"):(T.classList.remove("translate-y-0"),T.classList.add("-translate-y-full","opacity-0","pointer-events-none"),T.dataset.mobileSearchStatus="0")})),k?.addEventListener("keyup",(a=>{clearTimeout(e),e=setTimeout((async()=>{const e=a.target.value;e||b.classList.add("hidden"),t||(t=_.getAttribute("href")),_.setAttribute("href",`${t}?s_keyword=${e}`);const r=await fetch(`${kiranime_endpoint}/anime/search?query=${e}`),o=await r.json();r.ok||(0,n.error)(s["app:181"]);const i=o.result;w.innerHTML=i,b.classList.remove("hidden")}),500)})),h?.addEventListener("keyup",(a=>{clearTimeout(e),e=setTimeout((async()=>{const e=a.target.value;e||L.classList.add("hidden"),t||(t=q.getAttribute("href")),q.setAttribute("href",`${t}?s_keyword=${e}`);const r=await fetch(`${kiranime_endpoint}/anime/search?query=${e}`),o=await r.json();r.ok||(0,n.error)(s["app:181"]);const i=o.result;S.innerHTML=i,L.classList.remove("hidden")}),500)})),document.addEventListener("click",(e=>{L.contains(e.target)&&b.contains(e.target)||(L.classList.add("hidden"),b.classList.add("hidden")),T.contains(e.target)||e.target.closest("[data-mobile-search-trigger]")||(T.classList.add("-translate-y-full","opacity-0","pointer-events-none"),T.dataset.mobileSearchStatus="0")}))}const x=document.querySelector("[data-genre-input]");if(x){let e=[];e=x.value?x.value.split(","):[],document.querySelectorAll("[data-genre-slug]").forEach((t=>{t.addEventListener("click",(t=>{const a=t.target.getAttribute("data-genre-slug"),n=e.findIndex((e=>e===a));-1!==n?(t.target.classList.remove("ring-accent","text-accent"),t.target.classList.add("ring-gray-500"),e?.splice(n,1),x.value=e.join(",")):(t.target.classList.remove("ring-gray-500"),t.target.classList.add("ring-accent","text-accent"),e?.push(a),x.value=e.join(","))}))}))}const j=document.querySelector("[data-dropdown-notification-trigger]"),$=document.querySelector("[data-dropdown-notification-content]"),O=document.querySelector("[data-set-all-notification-read]");O&&O.addEventListener("click",(async()=>{const e=document.querySelector('[name="notif-ids"]')?.value,t=new FormData;if(t.append("action","kiranime_check_notification"),t.append("notification_id",e),!(await fetch(`${kiranime_endpoint}/notification`,{method:"PUT",body:JSON.stringify({notification_id:e.split(","),user_id:current_user_id}),headers:{"Content-Type":"application/json","X-WP-Nonce":user_action}})).ok)return void(0,n.error)(s["app:181"]);document.querySelectorAll("[data-notification-id]").forEach((e=>e.classList.add("opacity-75")));const a=document.querySelector("[data-notification-number]");a.classList.add("hidden"),a.classList.remove("flex")})),j&&(j.addEventListener("click",(()=>{"0"===$.dataset.dropdownNotificationContent?($.classList.remove("-translate-y-full","opacity-0","pointer-events-none"),$.classList.add("translate-y-0"),$.dataset.dropdownNotificationContent="1"):($.classList.remove("translate-y-0"),$.classList.add("-translate-y-full","opacity-0","pointer-events-none"),$.dataset.dropdownNotificationContent="0")})),document.addEventListener("DOMContentLoaded",(async()=>{let e="";const t=await fetch(`${kiranime_endpoint}/notification?user_id=${current_user_id}`,{headers:{"X-WP-Nonce":user_action}}),a=await t.json();t.ok||(0,n.error)(s["app:181"]);for(const t of a)e+=`<a data-notification-id="${t.notif_id}" class="flex gap-2 mb-2 text-xs font-medium px-4 py-2 ${t.status?"opacity-75":""}"\n\thref="${t.url}?n_id=${t.notif_id}">\n\t<div class="w-12 h-14 overflow-hidden relative"><img\n\t\t\tsrc="${t.featured}"\n\t\t\tclass="w-full h-full object-cover absolute inset-0" alt="${t.title}"></div>\n\t<div>\n\t\t<span class="block">\n\t\t\t${s["app:441"].replace("${1}",t.title).replace("${2}",t.number)}\n\t\t</span>\n\t\t<div class="text-xs font-light mt-1 text-accent">${t.published}</div>\n\t</div>\n</a>`;const r=a?.map((e=>e.notif_id)),o=a?.filter((e=>!e.status));if(o&&o.length>0){const e=document.querySelector("[data-notification-number]");e.innerHTML=o.length,e.classList.remove("hidden"),e.classList.add("flex")}document.querySelector('[name="notif-ids"]').value=r.join(","),document.querySelector("[data-notification-content-area]").innerHTML=e})),document.addEventListener("click",(e=>{$?.contains(e.target)||null!==e.target.closest("[data-dropdown-notification-trigger]")||($.classList.remove("translate-y-0"),$.classList.add("-translate-y-full","opacity-0","pointer-events-none"),$.dataset.dropdownNotificationContent="0")})));const M=document.querySelector("[data-user-menu-dropdown]"),N=document.querySelector("[data-user-menu-content]");M&&(M.addEventListener("click",(e=>{"0"===document.querySelector("[data-user-menu-state]").dataset.userMenuState?(N.classList.remove("-translate-y-full","opacity-0","pointer-events-none"),N.classList.add("translate-y-0"),N.dataset.userMenuState="1"):(N.classList.add("-translate-y-full","opacity-0","pointer-events-none"),N.classList.remove("translate-y-0"),N.dataset.userMenuState="0")})),document.addEventListener("click",(e=>{N?.contains(e.target)||null!==e.target.closest("[data-user-menu-dropdown]")||(N.classList.remove("translate-y-0"),N.classList.add("-translate-y-full","opacity-0","pointer-events-none"),N.dataset.userMenuState="0")})));const P=document.querySelector("[data-change-password-fields]"),H=document.querySelector("[data-show-change-password]");H&&H.addEventListener("click",(e=>{P.classList.toggle("hidden")}));const A=document.querySelectorAll("[data-add-to-watch-list]");A&&A.forEach((e=>{e.addEventListener("click",(async e=>{if(!isloggedIn)return void document.querySelector("[data-login-toggle]").click();const t=e.target.getAttribute("data-watch-list-key"),a=e.target.getAttribute("data-watch-list-id");let r=null;r="remove"===t?await fetch(kiranime_endpoint+"/watchlist",{body:JSON.stringify({user_id:current_user_id,anime_id:a}),method:"DELETE",headers:{"Content-Type":"application/json","X-WP-Nonce":user_action}}):await fetch(kiranime_endpoint+"/watchlist",{body:JSON.stringify({user_id:current_user_id,type:t,anime_id:a}),method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":user_action}});const o=await r.json();r.ok?(0,n.success)(o.message):(0,n.error)(s["app:565"])}))}));const C=document.querySelector("[data-save-user-setting]");C&&C.addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector("[data-auto-play-setting]")?.checked;if(void 0!==t||null!==t){const e=new FormData;e.append("action","kiranime_save_user_setting"),e.append("data",JSON.stringify([{name:"kiranime_user_auto_play",value:t}])),fetch(ajaxUrl,{body:e,method:"POST"}).then((e=>e.json())).then((e=>(0,n.success)(s["app:591"])))}}));const D=document.querySelector("[data-logout-trigger]");D&&D.addEventListener("click",(async e=>{(await fetch(`${kiranime_endpoint}/auth/logout`,{method:"POST",headers:{"X-WP-Nonce":user_action}})).ok&&((0,n.success)(s["app:608"]),setTimeout((()=>{location.reload()}),1250))}));const J=document.querySelector("[data-show-all-button]"),W=document.querySelector("[data-hide-all-button]");if(J){const e=document.querySelector("[data-characters]");J.addEventListener("click",(t=>{e.classList.add("active"),J.classList.remove("flex"),J.classList.add("hidden"),W.classList.add("flex"),W.classList.remove("hidden")})),W.addEventListener("click",(t=>{e.classList.remove("active"),J.classList.add("flex"),J.classList.remove("hidden"),W.classList.remove("flex"),W.classList.add("hidden")}))}document.querySelector("[data-comment-login-button]")?.addEventListener("click",(()=>{document.querySelector("[data-login-toggle]").click()}))}},a={};function n(e){var s=a[e];if(void 0!==s)return s.exports;var r=a[e]={id:e,exports:{}};return t[e](r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,a,s,r)=>{if(!a){var o=1/0;for(l=0;l<e.length;l++){for(var[a,s,r]=e[l],i=!0,c=0;c<a.length;c++)(!1&r||o>=r)&&Object.keys(n.O).every((e=>n.O[e](a[c])))?a.splice(c--,1):(i=!1,r<o&&(o=r));if(i){e.splice(l--,1);var d=s();void 0!==d&&(t=d)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[a,s,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=143,(()=>{var e={143:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var s,r,[o,i,c]=a,d=0;if(o.some((t=>0!==e[t]))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(c)var l=c(n)}for(t&&t(a);d<o.length;d++)r=o[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},a=self.webpackChunkkiranime=self.webpackChunkkiranime||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var s=n.O(void 0,[216],(()=>n(5431)));s=n.O(s)})();